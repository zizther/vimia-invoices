import{J as K,ah as Q,G as Y,B as b,a0 as Z,k as I,aR as ee,r as s,o as B,l as y,w as a,f as t,q as k,ag as V,u as n,m as F,i,t as u,j as te,h as x}from"./vendor.01d0adc5.js";import{u as ae}from"./invoice.94f6a92c.js";import oe from"./BaseTable.b82632a5.js";import{u as se}from"./global.baecaf92.js";import{_ as ne}from"./MoonwalkerIcon.ab503573.js";import"./auth.0422ff47.js";import"./main.c43fbacd.js";const le=x("div",{class:"hidden w-8 h-0 mx-4 border border-gray-400 border-solid xl:block",style:{"margin-top":"1.5rem"}},null,-1),ce={class:"relative table-container"},ve={setup(re){const{t:d}=K();Q("utils"),Y();const D=b(null);let g=b(!0),m=b(!1);const P=b(["DRAFT","DUE","SENT","VIEWED","OVERDUE","COMPLETED"]),o=Z({status:"",from_date:"",to_date:"",invoice_number:""}),p=ae(),h=se();I(()=>h.currency);const j=I(()=>[{key:"invoice_date",label:d("invoices.date"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"invoice_number",label:d("invoices.number")},{key:"status",label:d("invoices.status")},{key:"paid_status",label:d("invoices.paid_status")},{key:"due_amount",label:d("dashboard.recent_invoices_card.amount_due")},{key:"actions",thClass:"text-right",tdClass:"text-right text-sm font-medium",sortable:!1}]),$=I(()=>!p.totalInvoices&&!g.value);ee(o,()=>{T()},{debounce:500});function N(){D.value.refresh()}function T(){N()}function S(){o.status="",o.from_date="",o.to_date="",o.invoice_number=""}function U(){m.value&&S(),m.value=!m.value}async function H({page:l,sort:c}){let f={status:o.status,invoice_number:o.invoice_number,from_date:o.from_date,to_date:o.to_date,orderByField:c.fieldName||"created_at",orderBy:c.order||"desc",page:l};g.value=!0;let _=await p.fetchInvoices(f,h.companySlug);return g.value=!1,{data:_.data.data,pagination:{totalPages:_.data.meta.last_page,currentPage:l,totalCount:_.data.meta.total,limit:10}}}return(l,c)=>{const f=s("BaseBreadcrumbItem"),_=s("BaseBreadcrumb"),r=s("BaseIcon"),G=s("BaseButton"),M=s("BasePageHeader"),R=s("BaseSelectInput"),v=s("BaseInputGroup"),W=s("BaseInput"),w=s("BaseDatePicker"),z=s("BaseFilterWrapper"),O=s("BaseEmptyPlaceholder"),C=s("router-link"),q=s("BaseFormatMoney"),E=s("BaseInvoiceStatusBadge"),A=s("BaseDropdownItem"),J=s("BaseDropdown"),L=s("BasePage");return B(),y(L,null,{default:a(()=>[t(M,{title:l.$t("invoices.title")},{actions:a(()=>[k(t(G,{variant:"primary-outline",onClick:U},{right:a(e=>[n(m)?(B(),y(r,{key:1,name:"XIcon",class:F(e.class)},null,8,["class"])):(B(),y(r,{key:0,name:"FilterIcon",class:F(e.class)},null,8,["class"]))]),default:a(()=>[i(u(l.$t("general.filter"))+" ",1)]),_:1},512),[[V,n(p).totalInvoices]])]),default:a(()=>[t(_,null,{default:a(()=>[t(f,{title:l.$t("general.home"),to:`/${n(h).companySlug}/customer/dashboard`},null,8,["title","to"]),t(f,{title:l.$tc("invoices.invoice",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),k(t(z,{onClear:S},{default:a(()=>[t(v,{label:l.$t("invoices.status"),class:"px-3"},{default:a(()=>[t(R,{modelValue:n(o).status,"onUpdate:modelValue":c[0]||(c[0]=e=>n(o).status=e),options:P.value,searchable:"","allow-empty":!1,placeholder:l.$t("general.select_a_status")},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),t(v,{label:l.$t("invoices.invoice_number"),color:"black-light",class:"px-3 mt-2"},{default:a(()=>[t(W,{modelValue:n(o).invoice_number,"onUpdate:modelValue":c[1]||(c[1]=e=>n(o).invoice_number=e)},{default:a(()=>[t(r,{name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}),t(r,{name:"HashtagIcon",class:"h-5 ml-3 text-gray-600"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(v,{label:l.$t("general.from"),class:"px-3"},{default:a(()=>[t(w,{modelValue:n(o).from_date,"onUpdate:modelValue":c[2]||(c[2]=e=>n(o).from_date=e),"calendar-button":!0,"calendar-button-icon":"calendar"},null,8,["modelValue"])]),_:1},8,["label"]),le,t(v,{label:l.$t("general.to"),class:"px-3"},{default:a(()=>[t(w,{modelValue:n(o).to_date,"onUpdate:modelValue":c[3]||(c[3]=e=>n(o).to_date=e),"calendar-button":!0,"calendar-button-icon":"calendar"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},512),[[V,n(m)]]),n($)?(B(),y(O,{key:0,title:l.$t("invoices.no_invoices"),description:l.$t("invoices.list_of_invoices")},{default:a(()=>[t(ne,{class:"mt-5 mb-4"})]),_:1},8,["title","description"])):te("",!0),k(x("div",ce,[t(oe,{ref:(e,X)=>{X.table=e,D.value=e},data:H,columns:n(j),"placeholder-count":n(p).totalInvoices>=20?10:5,class:"mt-10"},{"cell-invoice_date":a(({row:e})=>[i(u(e.data.formatted_invoice_date),1)]),"cell-invoice_number":a(({row:e})=>[t(C,{to:{path:`invoices/${e.data.id}/view`},class:"font-medium text-primary-500"},{default:a(()=>[i(u(e.data.invoice_number),1)]),_:2},1032,["to"])]),"cell-due_amount":a(({row:e})=>[t(q,{amount:e.data.total,currency:e.data.customer.currency},null,8,["amount","currency"])]),"cell-status":a(({row:e})=>[t(E,{status:e.data.status,class:"px-3 py-1"},{default:a(()=>[i(u(e.data.status),1)]),_:2},1032,["status"])]),"cell-paid_status":a(({row:e})=>[t(E,{status:e.data.paid_status,class:"px-3 py-1"},{default:a(()=>[i(u(e.data.paid_status),1)]),_:2},1032,["status"])]),"cell-actions":a(({row:e})=>[t(J,null,{activator:a(()=>[t(r,{name:"DotsHorizontalIcon",class:"h-5 text-gray-500"})]),default:a(()=>[t(C,{to:`invoices/${e.data.id}/view`},{default:a(()=>[t(A,null,{default:a(()=>[t(r,{name:"EyeIcon",class:"h-5 mr-3 text-gray-600"}),i(" "+u(l.$t("general.view")),1)]),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:1},8,["columns","placeholder-count"])],512),[[V,!n($)]])]),_:1})}}};export{ve as default};
