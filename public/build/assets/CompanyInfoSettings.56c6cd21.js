var te=Object.defineProperty;var L=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var T=(f,s,d)=>s in f?te(f,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):f[s]=d,A=(f,s)=>{for(var d in s||(s={}))oe.call(s,d)&&T(f,d,s[d]);if(L)for(var d of L(s))se.call(s,d)&&T(f,d,s[d]);return f};import{aN as ne,J as R,B as h,a0 as J,k as F,L as I,M as k,P as le,T as E,r as i,o as S,l as q,w as r,h as u,t as v,u as e,f as o,i as j,m as O,j as z,U as P,ah as de,N as re,e as H,x as ie,F as ue}from"./vendor.01d0adc5.js";import{b as K,c as Q,d as W}from"./main.c43fbacd.js";const me={class:"flex justify-between w-full"},ce={class:"px-6 pt-6"},pe={class:"font-medium text-lg text-left"},_e={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},fe=["onSubmit"],ye={class:"p-4 sm:p-6 space-y-4"},ge={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},ve={setup(f){const s=K(),d=Q(),M=W(),B=ne(),{t:D}=R();let m=h(!1);const a=J({id:s.selectedCompany.id,name:null}),b=F(()=>d.active&&d.componentName==="DeleteCompanyModal"),V={formData:{name:{required:I.withMessage(D("validation.required"),k),sameAsName:I.withMessage(D("validation.company_name_not_same"),le(s.selectedCompany.name))}}},p=E(V,{formData:a},{$scope:!1});async function U(){if(p.value.$touch(),p.value.$invalid)return!0;const g=s.companies[0];m.value=!0;try{const y=await s.deleteCompany(a);console.log(y.data.success),y.data.success&&(C(),await s.setSelectedCompany(g),B.push("/admin/dashboard"),await M.setIsAppLoaded(!1),await M.bootstrap()),m.value=!1}catch{m.value=!1}}function _(){a.id=null,a.name="",p.value.$reset()}function C(){d.closeModal(),setTimeout(()=>{_(),p.value.$reset()},300)}return(g,y)=>{const x=i("BaseInput"),l=i("BaseInputGroup"),t=i("BaseButton"),N=i("BaseIcon"),c=i("BaseModal");return S(),q(c,{show:e(b),onClose:C},{default:r(()=>[u("div",me,[u("div",ce,[u("h6",pe,v(e(d).title),1),u("p",_e,v(g.$t("settings.company_info.delete_company_modal_desc",{company:e(s).selectedCompany.name})),1)])]),u("form",{action:"",onSubmit:P(U,["prevent"])},[u("div",ye,[o(l,{label:g.$t("settings.company_info.delete_company_modal_label",{company:e(s).selectedCompany.name}),error:e(p).formData.name.$error&&e(p).formData.name.$errors[0].$message,required:""},{default:r(()=>[o(x,{modelValue:e(a).name,"onUpdate:modelValue":y[0]||(y[0]=$=>e(a).name=$),invalid:e(p).formData.name.$error,onInput:y[1]||(y[1]=$=>e(p).formData.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),u("div",ge,[o(t,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:C},{default:r(()=>[j(v(g.$t("general.cancel")),1)]),_:1}),o(t,{loading:e(m),disabled:e(m),variant:"danger",type:"submit"},{left:r($=>[e(m)?z("",!0):(S(),q(N,{key:0,name:"TrashIcon",class:O($.class)},null,8,["class"]))]),default:r(()=>[j(" "+v(g.$t("general.delete")),1)]),_:1},8,["loading","disabled"])])],40,fe)]),_:1},8,["show"])}}},be=["onSubmit"],$e={key:0,class:"py-5"},Be={class:"text-lg leading-6 font-medium text-gray-900"},Ve={class:"mt-2 max-w-xl text-sm text-gray-500"},Ce={class:"mt-5"},Se={setup(f){const s=K(),d=W(),M=Q(),{t:B}=R(),D=de("utils");let m=h(!1);const a=J({name:null,logo:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""}});D.mergeSettings(a,A({},s.selectedCompany));let b=h([]),V=h(null),p=h(null);a.logo&&b.value.push({image:a.logo});const U=F(()=>({name:{required:I.withMessage(B("validation.required"),k),minLength:I.withMessage(B("validation.name_min_length"),re(3))},address:{country_id:{required:I.withMessage(B("validation.required"),k)}}})),_=E(U,F(()=>a));d.fetchCountries();function C(l,t,N,c){p.value=c.name,V.value=t}function g(){V.value=null}async function y(){if(_.value.$touch(),_.value.$invalid)return!0;if(m.value=!0,(await s.updateCompany(a)).data.data){if(V.value){let t=new FormData;t.append("company_logo",JSON.stringify({name:p.value,data:V.value})),await s.updateCompanyLogo(t)}m.value=!1}m.value=!1}function x(l){M.openModal({title:B("settings.company_info.are_you_absolutely_sure"),componentName:"DeleteCompanyModal",size:"sm"})}return(l,t)=>{const N=i("BaseFileUploader"),c=i("BaseInputGroup"),$=i("BaseInputGrid"),w=i("BaseInput"),X=i("BaseMultiselect"),G=i("BaseTextarea"),Y=i("BaseIcon"),Z=i("BaseButton"),ee=i("BaseDivider"),ae=i("BaseSettingCard");return S(),H(ue,null,[u("form",{onSubmit:P(y,["prevent"])},[o(ae,{title:l.$t("settings.company_info.company_info"),description:l.$t("settings.company_info.section_description")},{default:r(()=>[o($,{class:"mt-5"},{default:r(()=>[o(c,{label:l.$tc("settings.company_info.company_logo")},{default:r(()=>[o(N,{modelValue:e(b),"onUpdate:modelValue":t[0]||(t[0]=n=>ie(b)?b.value=n:b=n),base64:"",onChange:C,onRemove:g},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o($,{class:"mt-5"},{default:r(()=>[o(c,{label:l.$tc("settings.company_info.company_name"),error:e(_).name.$error&&e(_).name.$errors[0].$message,required:""},{default:r(()=>[o(w,{modelValue:e(a).name,"onUpdate:modelValue":t[1]||(t[1]=n=>e(a).name=n),invalid:e(_).name.$error,onBlur:t[2]||(t[2]=n=>e(_).name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),o(c,{label:l.$tc("settings.company_info.phone")},{default:r(()=>[o(w,{modelValue:e(a).address.phone,"onUpdate:modelValue":t[3]||(t[3]=n=>e(a).address.phone=n)},null,8,["modelValue"])]),_:1},8,["label"]),o(c,{label:l.$tc("settings.company_info.country"),error:e(_).address.country_id.$error&&e(_).address.country_id.$errors[0].$message,required:""},{default:r(()=>[o(X,{modelValue:e(a).address.country_id,"onUpdate:modelValue":t[4]||(t[4]=n=>e(a).address.country_id=n),label:"name",invalid:e(_).address.country_id.$error,options:e(d).countries,"value-prop":"id","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name"},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),o(c,{label:l.$tc("settings.company_info.state")},{default:r(()=>[o(w,{modelValue:e(a).address.state,"onUpdate:modelValue":t[5]||(t[5]=n=>e(a).address.state=n),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),o(c,{label:l.$tc("settings.company_info.city")},{default:r(()=>[o(w,{modelValue:e(a).address.city,"onUpdate:modelValue":t[6]||(t[6]=n=>e(a).address.city=n),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),o(c,{label:l.$tc("settings.company_info.zip")},{default:r(()=>[o(w,{modelValue:e(a).address.zip,"onUpdate:modelValue":t[7]||(t[7]=n=>e(a).address.zip=n)},null,8,["modelValue"])]),_:1},8,["label"]),u("div",null,[o(c,{label:l.$tc("settings.company_info.address")},{default:r(()=>[o(G,{modelValue:e(a).address.address_street_1,"onUpdate:modelValue":t[8]||(t[8]=n=>e(a).address.address_street_1=n),rows:"2"},null,8,["modelValue"])]),_:1},8,["label"]),o(G,{modelValue:e(a).address.address_street_2,"onUpdate:modelValue":t[9]||(t[9]=n=>e(a).address.address_street_2=n),rows:"2",row:2,class:"mt-2"},null,8,["modelValue"])])]),_:1}),o(Z,{loading:e(m),disabled:e(m),type:"submit",class:"mt-6"},{left:r(n=>[e(m)?z("",!0):(S(),q(Y,{key:0,class:O(n.class),name:"SaveIcon"},null,8,["class"]))]),default:r(()=>[j(" "+v(l.$tc("settings.company_info.save")),1)]),_:1},8,["loading","disabled"]),e(s).companies.length!==1?(S(),H("div",$e,[o(ee,{class:"my-4"}),u("h3",Be,v(l.$tc("settings.company_info.delete_company")),1),u("div",Ve,[u("p",null,v(l.$tc("settings.company_info.delete_company_description")),1)]),u("div",Ce,[u("button",{type:"button",class:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",onClick:x},v(l.$tc("general.delete")),1)])])):z("",!0)]),_:1},8,["title","description"])],40,be),o(ve)],64)}}};export{Se as default};
